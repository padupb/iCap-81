# Prompt â€“ AtualizaÃ§Ã£o do Comportamento da Tabela de Pedidos e Painel Detalhado

## Objetivo
Modificar a visualizaÃ§Ã£o da lista de pedidos para que cada linha da tabela atue como um botÃ£o. Ao clicar, serÃ¡ aberto um painel com uma TabList contendo quatro seÃ§Ãµes funcionais.

---

## AlteraÃ§Ãµes na Lista de Pedidos (Frontend)
1. **Remover a coluna de aÃ§Ãµes**.
2. **Cada linha da tabela deve ser clicÃ¡vel** e abrir um painel lateral (drawer).
3. O painel deve conter uma **TabList com quatro abas**: Detalhes do pedido, Confirmar entrega, Rastreamento, HistÃ³rico do pedido.
4. Seguir o padrÃ£o visual jÃ¡ estabelecido com Tailwind CSS, Shadcn/UI e React Tabs.

---

## Estrutura das Abas

### ğŸŸ¦ 1Âª Aba â€“ Detalhes do Pedido
- Produto: mostrar nome e quantidade formatada (ex: "CAP 50/70 â€“ 23 ton").
- Local da Obra: gerar link do Google Maps usando localizaÃ§Ã£o da obra vinculada Ã  ordem de compra.
- Fornecedor: nome da empresa fornecedora.
- Data de entrega: data planejada.
- Transportador: mostrar "NÃ£o atribuÃ­do" se nÃ£o houver.
- Data estimada de chegada: mostrar "NÃ£o disponÃ­vel" se nÃ£o houver.
- Linha do tempo (visual):
  - "Pedido" â€“ com data de criaÃ§Ã£o.
  - "Em rota" â€“ ativado quando a tabela `tracking_points` comeÃ§ar a registrar coordenadas.
  - "Entregue" â€“ marcado quando o pedido for confirmado como recebido.

### ğŸŸ© 2Âª Aba â€“ Confirmar Entrega
- BotÃµes:
  - "Aprovar carga"
  - "Rejeitar carga"
- Campo: quantidade aferida (peso real em balanÃ§a).
- âš ï¸ RestriÃ§Ã£o: apenas usuÃ¡rios da empresa vinculada ao contrato podem acessar esta aba.

### ğŸŸ¨ 3Âª Aba â€“ Rastreamento
- Exibir mapa estÃ¡tico com link do Google Maps com base no endereÃ§o do fornecedor.

### ğŸŸ§ 4Âª Aba â€“ HistÃ³rico do Pedido
Listar eventos em ordem cronolÃ³gica:
1. CriaÃ§Ã£o da ordem de compra
2. CriaÃ§Ã£o do pedido
3. AprovaÃ§Ã£o (se houver)
4. Upload de documentaÃ§Ã£o
5. SaÃ­da da distribuidora (evento a ser incluÃ­do)
6. Recebimento na obra

---

## Backend â€“ RecomendaÃ§Ãµes para Entrega Objetiva

- Criar endpoint para consultar dados completos do pedido com todos os relacionamentos:
  ```
  GET /api/pedidos/:id/detalhes
  ```
  Retornar:
  - Pedido
  - Produto
  - Ordem de compra
  - Fornecedor
  - Obra
  - Lista de eventos histÃ³ricos
  - tracking_points[]

- Criar tabela `tracking_points` (se ainda nÃ£o existir):
  ```sql
  CREATE TABLE tracking_points (
    id SERIAL PRIMARY KEY,
    pedido_id INTEGER REFERENCES orders(id),
    latitude NUMERIC,
    longitude NUMERIC,
    created_at TIMESTAMP DEFAULT NOW()
  );
  ```

- Criar endpoint para confirmar entrega:
  ```
  POST /api/pedidos/:id/confirmar
  Body: { status: 'aprovado' | 'rejeitado', quantidade: number }
  ```
